<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AromaCraft Á≤æÊ≤πË™øÈÖçÂ∏´</title>
    
    <!-- PWA / ÊâãÊ©üÂÖ®Ëû¢ÂπïË®≠ÂÆö -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="AromaCraft">
    <meta name="theme-color" content="#ffffff">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React Ê†∏ÂøÉ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Â≠óÂûã -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            -webkit-tap-highlight-color: transparent;
            /* Èò≤Ê≠¢ iOS ÂΩàÊÄßÊç≤ÂãïÊïàÊûúÈÄ†ÊàêÂ∫ïÈÉ®Á©øÂπ´ */
            overscroll-behavior-y: none; 
        }
        
        /* Èö±ËóèÊç≤ÂãïÊ¢ù‰ΩÜ‰øùÁïôÂäüËÉΩ */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* iOS Â∫ïÈÉ®ÂÆâÂÖ®ÂçÄÂüüÈÅ©ÈÖç */
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* ÂãïÁï´ */
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        .animate-slide-up {
            animation: slideUp 0.3s ease-out forwards;
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translate(-50%, -20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }
        .animate-fade-in-down {
            animation: fadeInDown 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 h-screen overflow-hidden">

    <div id="root" class="h-full overflow-y-auto pb-safe"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- ÂúñÁ§∫ÁµÑ‰ª∂ ---
        const IconBase = ({ size = 24, className = "", children }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );

        const Droplets = (props) => <IconBase {...props}><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"/><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"/></IconBase>;
        const FlaskConical = (props) => <IconBase {...props}><path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"/><path d="M8.5 2h7"/><path d="M7 16h10"/></IconBase>;
        const Leaf = (props) => <IconBase {...props}><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.77 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></IconBase>;
        const Info = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const RotateCcw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></IconBase>;
        const Copy = (props) => <IconBase {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconBase>;
        const Check = (props) => <IconBase {...props}><polyline points="20 6 9 17 4 12"/></IconBase>;
        const ChevronDown = (props) => <IconBase {...props}><path d="m6 9 6 6 6-6"/></IconBase>;
        const ChevronUp = (props) => <IconBase {...props}><path d="m18 15-6-6-6 6"/></IconBase>;
        const Wind = (props) => <IconBase {...props}><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></IconBase>;
        const Flower = (props) => <IconBase {...props}><circle cx="12" cy="12" r="3"/><path d="M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5"/><path d="M12 7.5V9"/><path d="M7.5 12H9"/><path d="M16.5 12H15"/><path d="M12 16.5V15"/><path d="M8 8l.7.7"/><path d="M16 8l-.7.7"/><path d="M16 16l-.7-.7"/><path d="M8 16l.7-.7"/></IconBase>;
        const TreeDeciduous = (props) => <IconBase {...props}><path d="M8 19h8a4 4 0 0 0 3.8-5.2 4 4 0 0 0-1-7.3 4.4 4.4 0 0 0-7.6-2.6A4.4 4.4 0 0 0 3.2 6.5a4 4 0 0 0-1 7.3A4 4 0 0 0 8 19Z"/><path d="M12 19v3"/></IconBase>;

        // --- Ë≥áÊñôÂ∫´ ---
        const OILS_DATA = [
            { id: 'bergamot', nameCN: '‰ΩõÊâãÊüë', nameEN: 'Bergamot', note: 'top', benefits: 'ÊîæÈ¨ÜÂøÉÊÉÖ„ÄÅÂÆâÊí´ÁÑ¶ÊÖÆ', category: 'citrus' },
            { id: 'lime', nameCN: 'ËêäÂßÜ', nameEN: 'Lime', note: 'top', benefits: 'ÊèêÊåØÁ≤æÁ•û„ÄÅÊ∏ÖÊñ∞Á©∫Ê∞£', category: 'citrus' },
            { id: 'lemon', nameCN: 'Ê™∏Ê™¨', nameEN: 'Lemon', note: 'top', benefits: 'Ê∑®ÂåñÊÄùÁ∑í„ÄÅÈô§Ëá≠', category: 'citrus' },
            { id: 'sweet_orange', nameCN: 'ÁîúÊ©ô', nameEN: 'Sweet Orange', note: 'top', benefits: 'ÊÑâÊÇÖÂøÉÊÉÖ„ÄÅËàíÁ∑©Â£ìÂäõ', category: 'citrus' },
            { id: 'grapefruit', nameCN: 'Ëë°ËêÑÊüö', nameEN: 'Grapefruit', note: 'top', benefits: '‰øÉÈÄ≤Âæ™Áí∞„ÄÅÊèêÊåØËá™‰ø°', category: 'citrus' },
            { id: 'petitgrain', nameCN: 'Ëã¶Ê©ôËëâ', nameEN: 'Petitgrain Paraguay', note: 'top', benefits: 'ÂÆâÊí´Á•ûÁ∂ì„ÄÅÂπ≥Ë°°Ê≤πËÑÇ', category: 'leaf' },
            { id: 'spearmint', nameCN: 'Á∂†ËñÑËç∑', nameEN: 'Spearmint', note: 'top', benefits: 'ÊèêÁ•ûÈÜíËÖ¶„ÄÅËàíÁ∑©ÂëºÂê∏', category: 'herb' },
            { id: 'peppermint', nameCN: 'ËÉ°Ê§íËñÑËç∑', nameEN: 'Peppermint', note: 'top', benefits: 'Â∞àÊ≥®Âäõ„ÄÅÁ∑©Ëß£È†≠Áóõ', category: 'herb' },
            { id: 'citronella', nameCN: 'È¶ôËåÖ', nameEN: 'Citronella', note: 'top', benefits: 'È©ÖËü≤„ÄÅÊ∑®ÂåñÁ©∫Ê∞£', category: 'herb' },
            
            { id: 'ylang', nameCN: '‰ºäËò≠', nameEN: 'Ylang Ylang', note: 'middle', benefits: 'ÂÇ¨ÊÉÖ„ÄÅÊîæÈ¨Ü„ÄÅËá™‰ø°', category: 'flower' },
            { id: 'geranium', nameCN: 'Â§©Á´∫Ëëµ', nameEN: 'Geranium', note: 'middle', benefits: 'Âπ≥Ë°°Ëç∑ÁàæËíô„ÄÅË≠∑ËÜö', category: 'flower' },
            { id: 'neroli', nameCN: 'Ê©ôËä±', nameEN: 'Neroli', note: 'middle', benefits: 'Ê•µËá¥ÊîæÈ¨Ü„ÄÅÂÆâÊí´È©öÂöá', category: 'flower' },
            { id: 'lavender', nameCN: 'ÁúüÊ≠£Ëñ∞Ë°£Ëçâ', nameEN: 'Lavender', note: 'middle', benefits: 'ÂÆâÁú†„ÄÅ‰øÆÂæ©ËÇåËÜö', category: 'flower' },
            { id: 'lavandin', nameCN: 'Á©óËä±Ëñ∞Ë°£Ëçâ', nameEN: 'Lavandin', note: 'middle', benefits: 'ÊÆ∫Ëèå„ÄÅËàíÁ∑©ËÇåËÇâ', category: 'flower' },
            { id: 'galbanum', nameCN: 'ÁôΩÊùæÈ¶ô', nameEN: 'Galbanum', note: 'middle', benefits: 'Ê∂àÁÇé„ÄÅÊàêÁÜüËÇåËÜö', category: 'resin' },
            { id: 'clove', nameCN: '‰∏ÅÈ¶ô', nameEN: 'Clove', note: 'middle', benefits: 'Ê∫´Êöñ„ÄÅËàíÁ∑©ÁâôÁóõ', category: 'spice' },
            { id: 'ginger', nameCN: 'Ëñë', nameEN: 'Ginger', note: 'middle', benefits: 'Ê∫´ÊöñË∫´ÂøÉ„ÄÅ‰øÉÈÄ≤Âæ™Áí∞', category: 'spice' },
            { id: 'cardamom', nameCN: 'Â∞èËç≥Ëîª', nameEN: 'Cardamom', note: 'middle', benefits: 'Ê∂àÂåñÁ≥ªÁµ±„ÄÅÊ∫´Êöñ', category: 'spice' },
            { id: 'nutmeg', nameCN: 'ËÇâË±ÜËîª', nameEN: 'Nutmeg', note: 'middle', benefits: 'ÊøÄÂãµ„ÄÅÁ∑©Ëß£Áñ≤Âãû', category: 'spice' },
            { id: 'cinnamon', nameCN: 'ËÇâÊ°Ç', nameEN: 'Cinnamon', note: 'middle', benefits: 'Âº∑ÊïàÊ∫´Êöñ„ÄÅÊäóËèå', category: 'spice' },

            { id: 'cedarwood', nameCN: 'Èõ™Êùæ', nameEN: 'Cedarwood', note: 'base', benefits: 'ÈéÆÈùúÂÜ•ÊÉ≥„ÄÅÂëºÂê∏ÈÅì', category: 'wood' },
            { id: 'patchouli', nameCN: 'Âª£ËóøÈ¶ô', nameEN: 'Patchouli', note: 'base', benefits: 'Á©©ÂÆöÊÉÖÁ∑í„ÄÅ‰øÆÂæ©ËÇåËÜö', category: 'leaf' },
            { id: 'myrrh', nameCN: 'Ê≤íËó•', nameEN: 'Myrrh', note: 'base', benefits: '‰øÆÂæ©ÂÇ∑Âè£„ÄÅÂπ≥Èùú', category: 'resin' },
            { id: 'frankincense', nameCN: '‰π≥È¶ô', nameEN: 'Frankincense', note: 'base', benefits: 'Ê∑±ÂåñÂëºÂê∏„ÄÅÊäóËÄÅ', category: 'resin' },
        ];

        const VOLUMES = [
            { value: 10, label: '10ml' },
            { value: 20, label: '20ml' },
            { value: 30, label: '30ml' },
        ];

        const DILUTIONS = [
            { value: 0.01, label: '1% ËáâÈÉ®', desc: 'ÈÅ©ÂêàËáâÈÉ®„ÄÅÊïèÊÑüËÇå' },
            { value: 0.03, label: '3% ÊåâÊë©', desc: 'ÈÅ©ÂêàÂÖ®Ë∫´„ÄÅÊó•Â∏∏' },
            { value: 0.05, label: '5% Â±ÄÈÉ®', desc: 'ÈÅ©ÂêàÁó†Áóõ„ÄÅÊÄ•Êïë' },
        ];

        const DROPS_PER_ML = 20;

        // --- ‰∏ªÁ®ãÂºè ---
        function AromaApp() {
            // State
            const [volume, setVolume] = useState(() => {
                const saved = localStorage.getItem('aroma_volume');
                return saved ? parseInt(saved) : 10;
            });
            
            const [dilution, setDilution] = useState(() => {
                const saved = localStorage.getItem('aroma_dilution');
                return saved ? parseFloat(saved) : 0.01;
            });

            const [selectedOils, setSelectedOils] = useState(() => {
                const saved = localStorage.getItem('aroma_oils');
                return saved ? JSON.parse(saved) : {};
            });

            const [activeTab, setActiveTab] = useState('all');
            const [showCopyAlert, setShowCopyAlert] = useState(false);

            // Effects
            useEffect(() => {
                localStorage.setItem('aroma_volume', volume);
                localStorage.setItem('aroma_dilution', dilution);
                localStorage.setItem('aroma_oils', JSON.stringify(selectedOils));
            }, [volume, dilution, selectedOils]);

            const maxDrops = Math.round(volume * DROPS_PER_ML * dilution);
            
            const currentDrops = useMemo(() => {
                return Object.values(selectedOils).reduce((sum, count) => sum + count, 0);
            }, [selectedOils]);

            const blendAnalysis = useMemo(() => {
                let top = 0, middle = 0, base = 0;
                Object.entries(selectedOils).forEach(([id, count]) => {
                    const oil = OILS_DATA.find(o => o.id === id);
                    if (oil) {
                        if (oil.note === 'top') top += count;
                        if (oil.note === 'middle') middle += count;
                        if (oil.note === 'base') base += count;
                    }
                });
                return { top, middle, base };
            }, [selectedOils]);

            const handleAddDrop = (id) => {
                if (currentDrops >= maxDrops) return;
                setSelectedOils(prev => ({
                    ...prev,
                    [id]: (prev[id] || 0) + 1
                }));
            };

            const handleRemoveDrop = (id) => {
                setSelectedOils(prev => {
                    const newCount = (prev[id] || 0) - 1;
                    if (newCount <= 0) {
                        const newState = { ...prev };
                        delete newState[id];
                        return newState;
                    }
                    return { ...prev, [id]: newCount };
                });
            };

            const handleReset = () => {
                if(confirm('Á¢∫ÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÁ≤æÊ≤πÈÖçÊñπÂóéÔºü')) {
                    setSelectedOils({});
                }
            };

            const handleCopyRecipe = () => {
                const lines = [];
                lines.push(`„ÄêAromaCraft ÈÖçÊñπ„Äë`);
                lines.push(`üî∏Âü∫Â∫ïÔºö${volume}ml`);
                lines.push(`üî∏ÊøÉÂ∫¶Ôºö${(dilution * 100).toFixed(0)}% (${dilution === 0.01 ? 'ËáâÈÉ®' : dilution === 0.03 ? 'Ë∫´È´î' : 'Â±ÄÈÉ®'})`);
                lines.push(`üî∏Á∏ΩÊª¥Êï∏Ôºö${currentDrops} / ${maxDrops} Êª¥`);
                lines.push(`\n----- ÈÖçÊñπÊòéÁ¥∞ -----`);
                Object.entries(selectedOils).forEach(([id, count]) => {
                    const oil = OILS_DATA.find(o => o.id === id);
                    const noteIcon = oil.note === 'top' ? 'üçÉ' : oil.note === 'middle' ? 'üå∏' : 'ü™µ';
                    lines.push(`${noteIcon} ${oil.nameCN}: ${count}Êª¥`);
                });
                
                const textArea = document.createElement("textarea");
                textArea.value = lines.join('\n');
                document.body.appendChild(textArea);
                textArea.select();
                try {
                   document.execCommand('copy');
                } catch (err) {
                   console.error('Copy failed', err);
                }
                document.body.removeChild(textArea);

                setShowCopyAlert(true);
                setTimeout(() => setShowCopyAlert(false), 2000);
            };

            const filteredOils = useMemo(() => {
                if (activeTab === 'all') return OILS_DATA;
                return OILS_DATA.filter(oil => oil.note === activeTab);
            }, [activeTab]);

            return (
                <div className="min-h-screen pb-40"> {/* Add padding bottom for fixed footer */}
                    
                    {/* Alert Toast */}
                    {showCopyAlert && (
                        <div className="fixed top-6 left-1/2 -translate-x-1/2 z-50 bg-stone-800 text-white px-6 py-3 rounded-full shadow-xl flex items-center gap-3 animate-fade-in-down whitespace-nowrap">
                            <Check size={20} className="text-emerald-400" /> 
                            <span className="font-bold">ÈÖçÊñπÂ∑≤Ë§áË£Ω</span>
                        </div>
                    )}

                    {/* Header */}
                    <header className="bg-white/90 backdrop-blur-md border-b border-stone-200 sticky top-0 z-30 shadow-sm pt-safe-top">
                        <div className="max-w-3xl mx-auto px-4 py-3 flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <div className="w-9 h-9 bg-emerald-600 rounded-xl flex items-center justify-center text-white shadow-emerald-200 shadow-lg">
                                    <Droplets size={20} />
                                </div>
                                <h1 className="text-xl font-bold tracking-tight text-stone-800">AromaCraft</h1>
                            </div>
                            <button onClick={handleReset} className="text-stone-400 hover:text-stone-600 p-2">
                                <RotateCcw size={20} />
                            </button>
                        </div>
                    </header>

                    <main className="max-w-3xl mx-auto px-4 py-6 space-y-6">
                        
                        {/* Settings */}
                        <section className="bg-white rounded-2xl p-4 shadow-sm border border-stone-100 space-y-4">
                            <div className="flex items-center gap-2 text-stone-800 font-bold text-base border-b border-stone-100 pb-2">
                                <FlaskConical className="text-emerald-600" size={18} />
                                <span>Ë®≠ÂÆöÂü∫Á§é</span>
                            </div>

                            <div className="grid grid-cols-1 gap-4">
                                <div className="space-y-2">
                                    <label className="text-xs font-bold text-stone-400 uppercase tracking-wider">ÂÆπÈáè</label>
                                    <div className="flex gap-2">
                                        {VOLUMES.map((v) => (
                                            <button
                                                key={v.value}
                                                onClick={() => setVolume(v.value)}
                                                className={`flex-1 py-2.5 rounded-xl text-sm font-medium border transition-all ${
                                                    volume === v.value
                                                        ? 'bg-emerald-600 text-white border-emerald-600 shadow-md ring-2 ring-emerald-100'
                                                        : 'bg-stone-50 text-stone-600 border-stone-200 active:bg-stone-100'
                                                }`}
                                            >
                                                {v.label}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div className="space-y-2">
                                    <label className="text-xs font-bold text-stone-400 uppercase tracking-wider">ÊøÉÂ∫¶</label>
                                    <div className="grid grid-cols-3 gap-2">
                                        {DILUTIONS.map((d) => (
                                            <button
                                                key={d.value}
                                                onClick={() => setDilution(d.value)}
                                                className={`py-2 rounded-xl text-sm font-medium border transition-all flex flex-col items-center justify-center ${
                                                    dilution === d.value
                                                        ? 'bg-emerald-600 text-white border-emerald-600 shadow-md ring-2 ring-emerald-100'
                                                        : 'bg-stone-50 text-stone-600 border-stone-200 active:bg-stone-100'
                                                }`}
                                            >
                                                <span className="text-lg font-bold">{d.value * 100}%</span>
                                                <span className={`text-[10px] ${dilution === d.value ? 'text-emerald-100' : 'text-stone-400'}`}>{d.label.split(' ')[1]}</span>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </section>

                        {/* Oil Selection */}
                        <section className="bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden min-h-[50vh]">
                            <div className="sticky top-[60px] z-20 bg-white/95 backdrop-blur border-b border-stone-100">
                                <div className="p-4 pb-2 flex items-center justify-between">
                                    <div className="flex items-center gap-2 text-stone-800 font-bold text-base">
                                        <Leaf className="text-emerald-600" size={18} />
                                        <span>ÈÅ∏ÊìáÁ≤æÊ≤π</span>
                                    </div>
                                    <div className="text-xs bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full font-medium">
                                        Â∑≤ÈÅ∏ <span className="font-bold text-lg">{currentDrops}</span> / {maxDrops} Êª¥
                                    </div>
                                </div>

                                <div className="flex px-2 overflow-x-auto scrollbar-hide">
                                    {[
                                        {id: 'all', label: 'ÂÖ®ÈÉ®'},
                                        {id: 'top', label: 'ÂâçË™ø', icon: Wind},
                                        {id: 'middle', label: '‰∏≠Ë™ø', icon: Flower},
                                        {id: 'base', label: 'ÂæåË™ø', icon: TreeDeciduous}
                                    ].map(tab => (
                                        <button
                                            key={tab.id}
                                            onClick={() => setActiveTab(tab.id)}
                                            className={`flex-1 min-w-[80px] py-3 text-sm font-medium flex flex-col items-center justify-center gap-1 border-b-2 transition-colors ${
                                                activeTab === tab.id 
                                                    ? 'border-emerald-600 text-emerald-800' 
                                                    : 'border-transparent text-gray-400'
                                            }`}
                                        >
                                            {tab.icon && <tab.icon size={18} />}
                                            {!tab.icon && <span className="h-[18px] flex items-center">ALL</span>}
                                            {tab.label}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <div className="p-3 grid grid-cols-1 gap-3 pb-20">
                                {filteredOils.map((oil) => {
                                    const count = selectedOils[oil.id] || 0;
                                    return (
                                        <div 
                                            key={oil.id} 
                                            className={`relative p-4 rounded-xl border transition-all active:scale-[0.99] ${
                                                count > 0 
                                                    ? 'border-emerald-500 bg-emerald-50/40 shadow-sm' 
                                                    : 'border-stone-100 bg-white'
                                            }`}
                                        >
                                            <div className="flex justify-between items-start">
                                                <div className="flex-1">
                                                    <div className="flex items-center gap-2 mb-1">
                                                        <h3 className="font-bold text-stone-800 text-lg">{oil.nameCN}</h3>
                                                        <div className={`text-[10px] px-1.5 py-0.5 rounded font-bold ${
                                                            oil.note === 'top' ? 'text-cyan-600 bg-cyan-100' :
                                                            oil.note === 'middle' ? 'text-pink-600 bg-pink-100' :
                                                            'text-amber-700 bg-amber-100'
                                                        }`}>
                                                            {oil.note === 'top' ? 'TOP' : oil.note === 'middle' ? 'MID' : 'BASE'}
                                                        </div>
                                                    </div>
                                                    <p className="text-xs text-stone-400 font-medium mb-1">{oil.nameEN}</p>
                                                    <p className="text-xs text-stone-500">{oil.benefits}</p>
                                                </div>

                                                <div className="flex flex-col items-center gap-1 pl-4 border-l border-stone-100 ml-2">
                                                    <button
                                                        onClick={() => handleAddDrop(oil.id)}
                                                        disabled={currentDrops >= maxDrops}
                                                        className={`w-10 h-10 rounded-full flex items-center justify-center transition-all ${
                                                            currentDrops < maxDrops 
                                                                ? 'bg-emerald-600 text-white shadow-lg shadow-emerald-200 active:bg-emerald-700 active:scale-95' 
                                                                : 'bg-stone-100 text-stone-300'
                                                        }`}
                                                    >
                                                        <ChevronUp size={24} />
                                                    </button>
                                                    
                                                    <span className={`font-bold text-xl my-1 w-8 text-center ${count > 0 ? 'text-emerald-700' : 'text-stone-200'}`}>
                                                        {count}
                                                    </span>

                                                    <button
                                                        onClick={() => handleRemoveDrop(oil.id)}
                                                        disabled={count === 0}
                                                        className={`w-10 h-10 rounded-full flex items-center justify-center transition-all ${
                                                            count > 0 
                                                                ? 'bg-white border-2 border-emerald-100 text-emerald-600 active:bg-emerald-50' 
                                                                : 'bg-stone-50 text-stone-200 border border-stone-100'
                                                        }`}
                                                    >
                                                        <ChevronDown size={24} />
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </section>

                    </main>

                    {/* Fixed Bottom Panel (Safe Area Support) */}
                    <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-stone-200 shadow-[0_-4px_20px_rgba(0,0,0,0.08)] z-40 pb-safe animate-slide-up">
                        <div className="max-w-3xl mx-auto px-4 py-3">
                            
                            {/* Analysis Bars */}
                            <div className="mb-3">
                                <div className="h-2.5 w-full bg-stone-100 rounded-full overflow-hidden flex mb-1">
                                    <div style={{ width: `${currentDrops > 0 ? (blendAnalysis.top / currentDrops) * 100 : 0}%` }} className="bg-cyan-400 h-full transition-all duration-500" />
                                    <div style={{ width: `${currentDrops > 0 ? (blendAnalysis.middle / currentDrops) * 100 : 0}%` }} className="bg-pink-400 h-full transition-all duration-500" />
                                    <div style={{ width: `${currentDrops > 0 ? (blendAnalysis.base / currentDrops) * 100 : 0}%` }} className="bg-amber-600 h-full transition-all duration-500" />
                                </div>
                                <div className="flex justify-between text-[10px] text-stone-400 font-bold uppercase tracking-wider">
                                    <span>Ââç {blendAnalysis.top}</span>
                                    <span>‰∏≠ {blendAnalysis.middle}</span>
                                    <span>Âæå {blendAnalysis.base}</span>
                                </div>
                            </div>

                            {/* Main Action Button */}
                            <button 
                                onClick={handleCopyRecipe}
                                disabled={currentDrops === 0}
                                className={`w-full py-3.5 rounded-xl font-bold text-base shadow-lg transition-all flex items-center justify-center gap-2 ${
                                    currentDrops === 0 
                                        ? 'bg-stone-200 text-stone-400 cursor-not-allowed' 
                                        : 'bg-emerald-800 text-white shadow-emerald-200 active:scale-[0.98]'
                                }`}
                            >
                                <Copy size={20} />
                                <span>Ë§áË£ΩÈÖçÊñπÂàÜ‰∫´</span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AromaApp />);
    </script>
</body>
</html>